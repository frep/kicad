EESchema Schematic File Version 2
LIBS:power
LIBS:device
LIBS:transistors
LIBS:conn
LIBS:linear
LIBS:regul
LIBS:74xx
LIBS:cmos4000
LIBS:adc-dac
LIBS:memory
LIBS:xilinx
LIBS:special
LIBS:microcontrollers
LIBS:dsp
LIBS:microchip
LIBS:analog_switches
LIBS:motorola
LIBS:texas
LIBS:intel
LIBS:audio
LIBS:interface
LIBS:digital-audio
LIBS:philips
LIBS:display
LIBS:cypress
LIBS:siliconi
LIBS:opto
LIBS:atmel
LIBS:contrib
LIBS:valves
LIBS:frep
LIBS:labPsu-cache
EELAYER 25 0
EELAYER END
$Descr A4 11693 8268
encoding utf-8
Sheet 1 5
Title "Lab Psu (0-20V 0-2A)"
Date ""
Rev "B"
Comp ""
Comment1 "- based on David Jones' uSupply project"
Comment2 "- Preregulation with SEPIC converter "
Comment3 "- Powered from standard pc psu (12V)"
Comment4 "- 2 pcb concept. To be used together with frontpanel pcb"
$EndDescr
$Comp
L CONN_8 P1
U 1 1 57DD2687
P 1150 1150
F 0 "P1" V 1100 1150 60  0000 C CNN
F 1 "Screw terminal" V 1200 1150 60  0000 C CNN
F 2 "" H 1150 1150 60  0001 C CNN
F 3 "" H 1150 1150 60  0000 C CNN
	1    1150 1150
	-1   0    0    1   
$EndComp
Text Notes 850  825  0    60   ~ 0
Adj
Text Notes 825  925  0    60   ~ 0
Gnd
Text Notes 825  1525 0    60   ~ 0
Gnd
Text Notes 825  1425 0    60   ~ 0
12V
Text Notes 825  1325 0    60   ~ 0
12V
Text Notes 875  1125 0    60   ~ 0
5V
Text Notes 825  1225 0    60   ~ 0
Gnd
Text GLabel 1500 800  2    40   Input ~ 0
Adj
Text GLabel 1500 1400 2    40   Input ~ 0
12V
Text GLabel 1500 1300 2    40   Input ~ 0
12V
Text GLabel 1500 1100 2    40   Input ~ 0
5V
Text GLabel 5850 7000 3    40   Input ~ 0
5V
Text GLabel 6100 7000 3    40   Input ~ 0
12V
$Comp
L PWR_FLAG #FLG01
U 1 1 57DD27F7
P 5850 7000
F 0 "#FLG01" H 5850 7095 30  0001 C CNN
F 1 "PWR_FLAG" H 5850 7180 30  0000 C CNN
F 2 "" H 5850 7000 60  0000 C CNN
F 3 "" H 5850 7000 60  0000 C CNN
	1    5850 7000
	1    0    0    -1  
$EndComp
$Comp
L PWR_FLAG #FLG02
U 1 1 57DD2825
P 6100 7000
F 0 "#FLG02" H 6100 7095 30  0001 C CNN
F 1 "PWR_FLAG" H 6100 7180 30  0000 C CNN
F 2 "" H 6100 7000 60  0000 C CNN
F 3 "" H 6100 7000 60  0000 C CNN
	1    6100 7000
	1    0    0    -1  
$EndComp
Text Notes 5600 6750 0    60   ~ 0
avoid power warnings
$Comp
L CONN_1 P3
U 1 1 57DD2896
P 5825 7575
F 0 "P3" H 5905 7575 40  0000 L CNN
F 1 "CONN_1" H 5825 7630 30  0001 C CNN
F 2 "" H 5825 7575 60  0001 C CNN
F 3 "" H 5825 7575 60  0000 C CNN
	1    5825 7575
	-1   0    0    1   
$EndComp
NoConn ~ 5975 7575
$Comp
L CONN_1 P2
U 1 1 57DD28EA
P 5825 7475
F 0 "P2" H 5905 7475 40  0000 L CNN
F 1 "CONN_1" H 5825 7530 30  0001 C CNN
F 2 "" H 5825 7475 60  0001 C CNN
F 3 "" H 5825 7475 60  0000 C CNN
	1    5825 7475
	-1   0    0    1   
$EndComp
NoConn ~ 5975 7475
$Comp
L CONN_1 P5
U 1 1 57DD2915
P 6250 7575
F 0 "P5" H 6330 7575 40  0000 L CNN
F 1 "CONN_1" H 6250 7630 30  0001 C CNN
F 2 "" H 6250 7575 60  0001 C CNN
F 3 "" H 6250 7575 60  0000 C CNN
	1    6250 7575
	-1   0    0    1   
$EndComp
NoConn ~ 6400 7575
$Comp
L CONN_1 P4
U 1 1 57DD291C
P 6250 7475
F 0 "P4" H 6330 7475 40  0000 L CNN
F 1 "CONN_1" H 6250 7530 30  0001 C CNN
F 2 "" H 6250 7475 60  0001 C CNN
F 3 "" H 6250 7475 60  0000 C CNN
	1    6250 7475
	-1   0    0    1   
$EndComp
NoConn ~ 6400 7475
Text Notes 5700 7400 0    60   ~ 0
Mounting holes
$Comp
L CONN_2 P6
U 1 1 57DD439B
P 8450 4600
F 0 "P6" V 8400 4600 40  0000 C CNN
F 1 "CONN_2" V 8500 4600 40  0000 C CNN
F 2 "" H 8450 4600 60  0001 C CNN
F 3 "" H 8450 4600 60  0000 C CNN
	1    8450 4600
	-1   0    0    -1  
$EndComp
$Comp
L CONN_2 P7
U 1 1 57DD43F3
P 8450 5275
F 0 "P7" V 8400 5275 40  0000 C CNN
F 1 "CONN_2" V 8500 5275 40  0000 C CNN
F 2 "" H 8450 5275 60  0001 C CNN
F 3 "" H 8450 5275 60  0000 C CNN
	1    8450 5275
	-1   0    0    -1  
$EndComp
Text Notes 8400 4375 0    60   ~ 0
i2c
Text Notes 8375 5025 0    60   ~ 0
serial
Text GLabel 700  2125 0    40   Input ~ 0
12V
$Comp
L AZ1117 U1
U 1 1 57DD5F0A
P 3200 1050
F 0 "U1" H 3350 854 60  0000 C CNN
F 1 "AZ1117" H 3200 1250 60  0000 C CNN
F 2 "" H 3200 1050 60  0001 C CNN
F 3 "" H 3200 1050 60  0000 C CNN
	1    3200 1050
	1    0    0    -1  
$EndComp
$Comp
L C C1
U 1 1 57DD6110
P 2700 1200
F 0 "C1" H 2700 1300 40  0000 L CNN
F 1 "4u7F" H 2706 1115 40  0000 L CNN
F 2 "" H 2738 1050 30  0001 C CNN
F 3 "" H 2700 1200 60  0000 C CNN
	1    2700 1200
	1    0    0    -1  
$EndComp
$Comp
L C C2
U 1 1 57DD61A7
P 3700 1200
F 0 "C2" H 3700 1300 40  0000 L CNN
F 1 "4u7F" H 3706 1115 40  0000 L CNN
F 2 "" H 3738 1050 30  0001 C CNN
F 3 "" H 3700 1200 60  0000 C CNN
	1    3700 1200
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR03
U 1 1 57DD63A5
P 2700 1400
F 0 "#PWR03" H 2700 1400 30  0001 C CNN
F 1 "GND" H 2700 1330 30  0001 C CNN
F 2 "" H 2700 1400 60  0000 C CNN
F 3 "" H 2700 1400 60  0000 C CNN
	1    2700 1400
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR04
U 1 1 57DD645A
P 3200 1300
F 0 "#PWR04" H 3200 1300 30  0001 C CNN
F 1 "GND" H 3200 1230 30  0001 C CNN
F 2 "" H 3200 1300 60  0000 C CNN
F 3 "" H 3200 1300 60  0000 C CNN
	1    3200 1300
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR05
U 1 1 57DD64A7
P 3700 1400
F 0 "#PWR05" H 3700 1400 30  0001 C CNN
F 1 "GND" H 3700 1330 30  0001 C CNN
F 2 "" H 3700 1400 60  0000 C CNN
F 3 "" H 3700 1400 60  0000 C CNN
	1    3700 1400
	1    0    0    -1  
$EndComp
Text GLabel 2600 1000 0    40   Input ~ 0
5V
Text GLabel 1750 6750 2    40   Input ~ 0
3V3_Reg
Text GLabel 2925 5375 2    40   Input ~ 0
3V3_Reg
Text GLabel 8800 4500 2    40   Input ~ 0
SDA
Text GLabel 8800 4700 2    40   Input ~ 0
SCL
Text GLabel 1750 7050 2    40   Input ~ 0
SDA
Text GLabel 1750 7150 2    40   Input ~ 0
SCL
Text GLabel 8800 5175 2    40   Input ~ 0
Rx
Text GLabel 8800 5375 2    40   Input ~ 0
Tx
Text GLabel 9575 4525 0    40   Input ~ 0
SDA
Text GLabel 10225 4675 2    40   Input ~ 0
Rx
Text GLabel 10225 4600 2    40   Input ~ 0
Tx
$Comp
L 32u4ProtoFeather U4
U 1 1 57DD99B7
P 9900 5125
F 0 "U4" H 9900 4500 40  0000 C CNN
F 1 "32u4ProtoFeather" H 9900 5825 40  0000 C CNN
F 2 "" H 9900 5350 40  0001 C CNN
F 3 "" H 9900 5350 40  0000 C CNN
	1    9900 5125
	1    0    0    -1  
$EndComp
NoConn ~ 9575 5275
NoConn ~ 9575 5350
$Comp
L JUMPER JP1
U 1 1 57DD9B56
P 9400 5500
F 0 "JP1" H 9400 5650 60  0000 C CNN
F 1 "JUMPER" H 9400 5420 40  0000 C CNN
F 2 "" H 9400 5500 60  0001 C CNN
F 3 "" H 9400 5500 60  0000 C CNN
	1    9400 5500
	0    -1   -1   0   
$EndComp
Text GLabel 9400 5800 3    40   Input ~ 0
5V
$Comp
L GND #PWR06
U 1 1 57DD9F39
P 10225 5425
F 0 "#PWR06" H 10225 5425 30  0001 C CNN
F 1 "GND" H 10225 5355 30  0001 C CNN
F 2 "" H 10225 5425 60  0000 C CNN
F 3 "" H 10225 5425 60  0000 C CNN
	1    10225 5425
	0    -1   -1   0   
$EndComp
$Comp
L GND #PWR07
U 1 1 57DD9F8C
P 10225 4525
F 0 "#PWR07" H 10225 4525 30  0001 C CNN
F 1 "GND" H 10225 4455 30  0001 C CNN
F 2 "" H 10225 4525 60  0000 C CNN
F 3 "" H 10225 4525 60  0000 C CNN
	1    10225 4525
	0    -1   -1   0   
$EndComp
Text GLabel 9575 4600 0    40   Input ~ 0
SCL
Text GLabel 9575 4675 0    40   Input ~ 0
Enable
Text GLabel 1750 6425 2    40   Input ~ 0
Enable
Text Notes 8625 850  0    70   ~ 0
fan control
Text GLabel 5000 1025 0    40   Input ~ 0
3V3_Reg
$Comp
L ISL21070 U3
U 1 1 57DE2858
P 5525 1100
F 0 "U3" H 5525 1400 60  0000 C CNN
F 1 "ISL21070" H 5525 1300 60  0000 C CNN
F 2 "" H 5525 1000 60  0001 C CNN
F 3 "" H 5525 1000 60  0000 C CNN
	1    5525 1100
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR08
U 1 1 57DE2916
P 5525 1575
F 0 "#PWR08" H 5525 1575 30  0001 C CNN
F 1 "GND" H 5525 1505 30  0001 C CNN
F 2 "" H 5525 1575 60  0000 C CNN
F 3 "" H 5525 1575 60  0000 C CNN
	1    5525 1575
	1    0    0    -1  
$EndComp
$Comp
L MCP4716 U2
U 1 1 57DE2995
P 3825 3050
F 0 "U2" H 3825 3300 60  0000 C CNN
F 1 "MCP4716" H 3825 2800 60  0000 C CNN
F 2 "" H 3825 2925 60  0001 C CNN
F 3 "" H 3825 2925 60  0000 C CNN
	1    3825 3050
	1    0    0    -1  
$EndComp
$Sheet
S 2050 1925 725  4125
U 57DE3071
F0 "CurrentSense" 60
F1 "CurrentSense.sch" 60
F2 "V_in" I L 2050 2125 60 
F3 "V_out" O R 2775 2125 60 
F4 "CurrentSense" O R 2775 5075 60 
F5 "3V3_Reg" I R 2775 5375 60 
F6 "SDA" I R 2775 5650 60 
F7 "SCL" I R 2775 5750 60 
$EndSheet
Text GLabel 2950 5650 2    40   Input ~ 0
SDA
Text GLabel 2950 5750 2    40   Input ~ 0
SCL
Text GLabel 3250 3150 0    40   Input ~ 0
SDA
Text GLabel 3250 3050 0    40   Input ~ 0
SCL
$Comp
L GND #PWR09
U 1 1 57DE6FD2
P 4400 3050
F 0 "#PWR09" H 4400 3050 30  0001 C CNN
F 1 "GND" H 4400 2980 30  0001 C CNN
F 2 "" H 4400 3050 60  0000 C CNN
F 3 "" H 4400 3050 60  0000 C CNN
	1    4400 3050
	0    -1   -1   0   
$EndComp
$Comp
L C C4
U 1 1 57DE72FF
P 4400 3350
F 0 "C4" H 4400 3450 40  0000 L CNN
F 1 "100nF" H 4406 3265 40  0000 L CNN
F 2 "" H 4438 3200 30  0001 C CNN
F 3 "" H 4400 3350 60  0000 C CNN
	1    4400 3350
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR010
U 1 1 57DE757E
P 4400 3550
F 0 "#PWR010" H 4400 3550 30  0001 C CNN
F 1 "GND" H 4400 3480 30  0001 C CNN
F 2 "" H 4400 3550 60  0000 C CNN
F 3 "" H 4400 3550 60  0000 C CNN
	1    4400 3550
	1    0    0    -1  
$EndComp
Text GLabel 4500 3150 2    40   Input ~ 0
3V3_Reg
Text Label 4650 2950 0    60   ~ 0
VSET
$Comp
L R R1
U 1 1 57DEC486
P 3475 4200
F 0 "R1" V 3555 4200 40  0000 C CNN
F 1 "10K" V 3482 4201 40  0000 C CNN
F 2 "" V 3405 4200 30  0001 C CNN
F 3 "" H 3475 4200 30  0000 C CNN
	1    3475 4200
	0    1    1    0   
$EndComp
$Comp
L R R3
U 1 1 57DEC56C
P 4275 4200
F 0 "R3" V 4355 4200 40  0000 C CNN
F 1 "10K" V 4282 4201 40  0000 C CNN
F 2 "" V 4205 4200 30  0001 C CNN
F 3 "" H 4275 4200 30  0000 C CNN
	1    4275 4200
	0    1    1    0   
$EndComp
$Comp
L R R2
U 1 1 57DEC646
P 4025 4450
F 0 "R2" V 4105 4450 40  0000 C CNN
F 1 "18K" V 4032 4451 40  0000 C CNN
F 2 "" V 3955 4450 30  0001 C CNN
F 3 "" H 4025 4450 30  0000 C CNN
	1    4025 4450
	1    0    0    -1  
$EndComp
$Comp
L C C3
U 1 1 57DEC70A
P 3725 4450
F 0 "C3" H 3725 4550 40  0000 L CNN
F 1 "100nF" H 3731 4365 40  0000 L CNN
F 2 "" H 3763 4300 30  0001 C CNN
F 3 "" H 3725 4450 60  0000 C CNN
	1    3725 4450
	1    0    0    -1  
$EndComp
$Comp
L C C5
U 1 1 57DEC7D4
P 4525 4450
F 0 "C5" H 4525 4550 40  0000 L CNN
F 1 "100nF" H 4531 4365 40  0000 L CNN
F 2 "" H 4563 4300 30  0001 C CNN
F 3 "" H 4525 4450 60  0000 C CNN
	1    4525 4450
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR011
U 1 1 57DED272
P 4025 4750
F 0 "#PWR011" H 4025 4750 30  0001 C CNN
F 1 "GND" H 4025 4680 30  0001 C CNN
F 2 "" H 4025 4750 60  0000 C CNN
F 3 "" H 4025 4750 60  0000 C CNN
	1    4025 4750
	1    0    0    -1  
$EndComp
Text GLabel 9575 4750 0    40   Input ~ 0
I_Set
Text GLabel 3225 4200 0    40   Input ~ 0
I_Set
Text Label 4700 4200 0    60   ~ 0
ISET
Text GLabel 9575 4825 0    40   Input ~ 0
Clim
$Comp
L R R6
U 1 1 57DF511B
P 6975 3200
F 0 "R6" V 7055 3200 40  0000 C CNN
F 1 "1K 0.1%" V 6982 3201 40  0000 C CNN
F 2 "" V 6905 3200 30  0001 C CNN
F 3 "" H 6975 3200 30  0000 C CNN
	1    6975 3200
	-1   0    0    1   
$EndComp
$Comp
L R R4
U 1 1 57DF520C
P 6775 2500
F 0 "R4" V 6855 2500 40  0000 C CNN
F 1 "18K 0.1%" V 6782 2501 40  0000 C CNN
F 2 "" V 6705 2500 30  0001 C CNN
F 3 "" H 6775 2500 30  0000 C CNN
	1    6775 2500
	-1   0    0    1   
$EndComp
$Comp
L R R5
U 1 1 57DF5303
P 6975 2500
F 0 "R5" V 7055 2500 40  0000 C CNN
F 1 "18K 0.1%" V 6982 2501 40  0000 C CNN
F 2 "" V 6905 2500 30  0001 C CNN
F 3 "" H 6975 2500 30  0000 C CNN
	1    6975 2500
	-1   0    0    1   
$EndComp
$Comp
L C C6
U 1 1 57DF54A3
P 6675 3200
F 0 "C6" H 6675 3300 40  0000 L CNN
F 1 "100nF" H 6681 3115 40  0000 L CNN
F 2 "" H 6713 3050 30  0001 C CNN
F 3 "" H 6675 3200 60  0000 C CNN
	1    6675 3200
	-1   0    0    -1  
$EndComp
Text GLabel 7225 2125 2    40   Output ~ 0
Adj
Text GLabel 10225 5350 2    40   Input ~ 0
ADC-IOUT
Text GLabel 10225 5275 2    40   Input ~ 0
ADC-VOUT
Text GLabel 6575 2950 0    40   Input ~ 0
ADC-VOUT
Text GLabel 4000 5250 2    40   Output ~ 0
ADC-IOUT
$Comp
L GND #PWR012
U 1 1 57DF8152
P 6825 3500
F 0 "#PWR012" H 6825 3500 30  0001 C CNN
F 1 "GND" H 6825 3430 30  0001 C CNN
F 2 "" H 6825 3500 60  0000 C CNN
F 3 "" H 6825 3500 60  0000 C CNN
	1    6825 3500
	1    0    0    -1  
$EndComp
Text GLabel 10225 5500 2    40   Input ~ 0
VRef
Text GLabel 6050 1025 2    40   Output ~ 0
VRef
Text GLabel 3800 1000 2    40   Output ~ 0
3V3_Reg
NoConn ~ 9575 5050
NoConn ~ 9575 5125
NoConn ~ 10225 5575
NoConn ~ 10225 5650
Text Notes 3725 2650 0    60   ~ 0
DAC
$Comp
L GND #PWR013
U 1 1 57E00A6B
P 1500 900
F 0 "#PWR013" H 1500 900 30  0001 C CNN
F 1 "GND" H 1500 830 30  0001 C CNN
F 2 "" H 1500 900 60  0000 C CNN
F 3 "" H 1500 900 60  0000 C CNN
	1    1500 900 
	0    -1   -1   0   
$EndComp
$Comp
L GND #PWR014
U 1 1 57E00D9E
P 1500 1200
F 0 "#PWR014" H 1500 1200 30  0001 C CNN
F 1 "GND" H 1500 1130 30  0001 C CNN
F 2 "" H 1500 1200 60  0000 C CNN
F 3 "" H 1500 1200 60  0000 C CNN
	1    1500 1200
	0    -1   -1   0   
$EndComp
$Comp
L GND #PWR015
U 1 1 57E00E78
P 1500 1500
F 0 "#PWR015" H 1500 1500 30  0001 C CNN
F 1 "GND" H 1500 1430 30  0001 C CNN
F 2 "" H 1500 1500 60  0000 C CNN
F 3 "" H 1500 1500 60  0000 C CNN
	1    1500 1500
	0    -1   -1   0   
$EndComp
Text GLabel 3250 2950 0    40   Input ~ 0
VRef
Text Notes 3225 4050 0    60   ~ 0
0-3.3V PWM IN\n0-2.12V DC OUT
Text GLabel 8225 5975 0    40   Input ~ 0
3V3_Reg
Text GLabel 8725 5975 2    40   Input ~ 0
SDA
Text GLabel 8725 6175 2    40   Input ~ 0
SCL
$Comp
L R R7
U 1 1 57E0686C
P 8475 5975
F 0 "R7" V 8555 5975 40  0000 C CNN
F 1 "2K" V 8482 5976 40  0000 C CNN
F 2 "" V 8405 5975 30  0001 C CNN
F 3 "" H 8475 5975 30  0000 C CNN
	1    8475 5975
	0    1    1    0   
$EndComp
$Comp
L R R8
U 1 1 57E069DF
P 8475 6175
F 0 "R8" V 8555 6175 40  0000 C CNN
F 1 "2K" V 8482 6176 40  0000 C CNN
F 2 "" V 8405 6175 30  0001 C CNN
F 3 "" H 8475 6175 30  0000 C CNN
	1    8475 6175
	0    1    1    0   
$EndComp
Text GLabel 8225 6175 0    40   Input ~ 0
3V3_Reg
Text Notes 7975 5800 0    60   ~ 0
i2c pullup resistors
Wire Wire Line
	2600 1000 2800 1000
Connection ~ 2700 1000
Wire Wire Line
	3600 1100 3600 1000
Wire Wire Line
	3600 1000 3800 1000
Connection ~ 3700 1000
Wire Wire Line
	2925 5375 2775 5375
Wire Wire Line
	700  2125 850  2125
Wire Wire Line
	9400 5200 9575 5200
Wire Wire Line
	4500 3150 4400 3150
Wire Wire Line
	4400 2950 5125 2950
Wire Wire Line
	4025 4200 3725 4200
Wire Wire Line
	3725 4200 3725 4250
Wire Wire Line
	4525 4250 4525 4200
Connection ~ 4025 4200
Connection ~ 3725 4200
Wire Wire Line
	4025 4700 4025 4750
Wire Wire Line
	3725 4700 4525 4700
Wire Wire Line
	3725 4700 3725 4650
Wire Wire Line
	4525 4700 4525 4650
Connection ~ 4025 4700
Connection ~ 4525 4200
Wire Wire Line
	1750 6750 1600 6750
Wire Wire Line
	6775 2250 6975 2250
Wire Wire Line
	6975 2250 6975 2125
Connection ~ 6975 2125
Wire Wire Line
	6775 2750 6975 2750
Wire Wire Line
	6975 2750 6975 2950
Wire Wire Line
	6975 2950 6575 2950
Wire Wire Line
	6675 3000 6675 2950
Connection ~ 6675 2950
Wire Wire Line
	6675 3400 6675 3450
Wire Wire Line
	6675 3450 6975 3450
Wire Wire Line
	6825 3500 6825 3450
Connection ~ 6825 3450
Connection ~ 6975 2250
Connection ~ 6975 2750
Wire Wire Line
	4525 4200 5125 4200
Text GLabel 1500 1000 2    40   Input ~ 0
5V
$Sheet
S 850  1925 750  5625
U 57DD3C19
F0 "Preregulation" 60
F1 "Preregulation.sch" 60
F2 "V_IN" I L 850 2125 60 
F3 "V_OUT" O R 1600 2125 60 
F4 "SDA" I R 1600 7050 60 
F5 "SCL" I R 1600 7150 60 
F6 "En" I R 1600 6425 60 
F7 "3V3Reg" I R 1600 6750 60 
$EndSheet
Wire Wire Line
	1600 2125 2050 2125
Text Notes 875  1025 0    60   ~ 0
5V
Wire Wire Line
	1750 6425 1600 6425
Wire Wire Line
	1750 7050 1600 7050
Wire Wire Line
	2775 5650 2950 5650
Text GLabel 1850 2375 2    40   Output ~ 0
V+
Wire Wire Line
	1850 2375 1825 2375
Wire Wire Line
	1825 2375 1825 2125
Connection ~ 1825 2125
$Comp
L PWR_FLAG #FLG016
U 1 1 57E1B40E
P 6350 7000
F 0 "#FLG016" H 6350 7095 30  0001 C CNN
F 1 "PWR_FLAG" H 6350 7180 30  0000 C CNN
F 2 "" H 6350 7000 60  0000 C CNN
F 3 "" H 6350 7000 60  0000 C CNN
	1    6350 7000
	1    0    0    -1  
$EndComp
Text GLabel 6350 7000 3    40   Input ~ 0
V+
$Sheet
S 3450 6500 750  1125
U 57E1BFC0
F0 "loads" 60
F1 "loads.sch" 60
F2 "5V" I L 3450 6750 60 
F3 "12V" I L 3450 7050 60 
F4 "3V3Reg" I L 3450 7350 60 
F5 "SCL" I R 4200 7450 60 
F6 "SDA" I R 4200 7350 60 
F7 "V_Load" O R 4200 6650 60 
F8 "I_Load" O R 4200 6750 60 
$EndSheet
Text GLabel 3250 6750 0    40   Input ~ 0
5V
Text GLabel 3250 7050 0    40   Input ~ 0
12V
Wire Wire Line
	3250 6750 3450 6750
Wire Wire Line
	3250 7050 3450 7050
Text GLabel 3250 7350 0    40   Input ~ 0
3V3_Reg
Text GLabel 4400 7350 2    40   Input ~ 0
SDA
Text GLabel 4400 7450 2    40   Input ~ 0
SCL
Wire Wire Line
	3250 7350 3450 7350
Wire Wire Line
	4400 7350 4200 7350
Wire Wire Line
	4400 7450 4200 7450
$Sheet
S 5125 1925 975  3450
U 57EF8FB1
F0 "Regulation" 60
F1 "Regulation.sch" 60
F2 "V_in" I L 5125 2125 60 
F3 "I_in" I L 5125 5075 60 
F4 "I_Set" I L 5125 4200 60 
F5 "V_out" O R 6100 2125 60 
F6 "V_set" I L 5125 2950 60 
$EndSheet
Wire Wire Line
	2775 2125 5125 2125
Wire Wire Line
	2775 5075 5125 5075
Wire Wire Line
	4000 5250 3900 5250
Wire Wire Line
	3900 5250 3900 5075
Connection ~ 3900 5075
Wire Wire Line
	6100 2125 7225 2125
NoConn ~ 10225 4750
NoConn ~ 10225 4825
NoConn ~ 10225 4900
Text GLabel 4400 6650 2    40   Output ~ 0
V_load
Text GLabel 4400 6750 2    40   Output ~ 0
I_load
Wire Wire Line
	4200 6650 4400 6650
Wire Wire Line
	4200 6750 4400 6750
Text GLabel 10225 5125 2    40   Input ~ 0
V_load
Text GLabel 10225 5200 2    40   Input ~ 0
I_load
Text GLabel 9575 4900 0    40   Output ~ 0
fan1
Text GLabel 9575 4975 0    40   Output ~ 0
fan2
Text GLabel 7675 1350 0    40   Input ~ 0
fan1
Text GLabel 7675 2600 0    40   Input ~ 0
fan2
$Comp
L OPAMP-DUALU IC5
U 1 1 57F138D8
P 8575 1450
F 0 "IC5" H 8850 1350 50  0000 R TNN
F 1 "LM324" H 8950 1600 50  0000 R TNN
F 2 "" H 8575 1600 50  0001 C CNN
F 3 "" H 8575 1450 60  0000 C CNN
	1    8575 1450
	1    0    0    1   
$EndComp
$Comp
L OPAMP-DUALU IC5
U 2 1 57F139BE
P 8675 2700
F 0 "IC5" H 8850 2850 50  0000 R TNN
F 1 "LM324" H 8950 2600 50  0000 R TNN
F 2 "" H 8675 2850 50  0001 C CNN
F 3 "" H 8675 2700 60  0000 C CNN
	2    8675 2700
	1    0    0    -1  
$EndComp
Text GLabel 8575 1750 3    40   Input ~ 0
5V
$Comp
L C C28
U 1 1 57F1475D
P 8175 1550
F 0 "C28" H 8175 1650 40  0000 L CNN
F 1 "100nF" H 8181 1465 40  0000 L CNN
F 2 "" H 8213 1400 30  0001 C CNN
F 3 "" H 8175 1550 60  0000 C CNN
	1    8175 1550
	-1   0    0    -1  
$EndComp
$Comp
L C C29
U 1 1 57F14870
P 8175 2800
F 0 "C29" H 8175 2900 40  0000 L CNN
F 1 "100nF" H 8181 2715 40  0000 L CNN
F 2 "" H 8213 2650 30  0001 C CNN
F 3 "" H 8175 2800 60  0000 C CNN
	1    8175 2800
	-1   0    0    -1  
$EndComp
$Comp
L C C30
U 1 1 57F1497D
P 8775 1750
F 0 "C30" H 8775 1850 40  0000 L CNN
F 1 "100nF" H 8781 1665 40  0000 L CNN
F 2 "" H 8813 1600 30  0001 C CNN
F 3 "" H 8775 1750 60  0000 C CNN
	1    8775 1750
	0    -1   1    0   
$EndComp
$Comp
L R R56
U 1 1 57F14B02
P 7925 1350
F 0 "R56" V 8005 1350 40  0000 C CNN
F 1 "10K" V 7932 1351 40  0000 C CNN
F 2 "" V 7855 1350 30  0001 C CNN
F 3 "" H 7925 1350 30  0000 C CNN
	1    7925 1350
	0    1    1    0   
$EndComp
$Comp
L R R57
U 1 1 57F14C2E
P 7925 2600
F 0 "R57" V 8005 2600 40  0000 C CNN
F 1 "10K" V 7932 2601 40  0000 C CNN
F 2 "" V 7855 2600 30  0001 C CNN
F 3 "" H 7925 2600 30  0000 C CNN
	1    7925 2600
	0    1    1    0   
$EndComp
$Comp
L 2N3904 Q4
U 1 1 57F14DF5
P 9325 1450
F 0 "Q4" H 9325 1301 40  0000 R CNN
F 1 "PN2222" H 9325 1600 40  0000 R CNN
F 2 "" H 9225 1552 29  0001 C CNN
F 3 "" H 9325 1450 60  0000 C CNN
	1    9325 1450
	1    0    0    -1  
$EndComp
$Comp
L 2N3904 Q5
U 1 1 57F14F10
P 9325 2700
F 0 "Q5" H 9325 2551 40  0000 R CNN
F 1 "PN2222" H 9325 2850 40  0000 R CNN
F 2 "" H 9225 2802 29  0001 C CNN
F 3 "" H 9325 2700 60  0000 C CNN
	1    9325 2700
	1    0    0    -1  
$EndComp
$Comp
L R R58
U 1 1 57F151F8
P 8125 2000
F 0 "R58" V 8205 2000 40  0000 C CNN
F 1 "10K" V 8132 2001 40  0000 C CNN
F 2 "" V 8055 2000 30  0001 C CNN
F 3 "" H 8125 2000 30  0000 C CNN
	1    8125 2000
	0    1    1    0   
$EndComp
$Comp
L R R60
U 1 1 57F1531B
P 8625 2000
F 0 "R60" V 8705 2000 40  0000 C CNN
F 1 "10K" V 8632 2001 40  0000 C CNN
F 2 "" V 8555 2000 30  0001 C CNN
F 3 "" H 8625 2000 30  0000 C CNN
	1    8625 2000
	0    1    1    0   
$EndComp
$Comp
L GND #PWR017
U 1 1 57F15886
P 8975 1750
F 0 "#PWR017" H 8975 1750 30  0001 C CNN
F 1 "GND" H 8975 1680 30  0001 C CNN
F 2 "" H 8975 1750 60  0000 C CNN
F 3 "" H 8975 1750 60  0000 C CNN
	1    8975 1750
	0    -1   -1   0   
$EndComp
$Comp
L GND #PWR018
U 1 1 57F15E26
P 8775 1150
F 0 "#PWR018" H 8775 1150 30  0001 C CNN
F 1 "GND" H 8775 1080 30  0001 C CNN
F 2 "" H 8775 1150 60  0000 C CNN
F 3 "" H 8775 1150 60  0000 C CNN
	1    8775 1150
	0    -1   -1   0   
$EndComp
Wire Wire Line
	8575 1150 8775 1150
Wire Wire Line
	8375 1550 8375 2000
Connection ~ 8375 2000
$Comp
L GND #PWR019
U 1 1 57F16BC0
P 7875 2000
F 0 "#PWR019" H 7875 2000 30  0001 C CNN
F 1 "GND" H 7875 1930 30  0001 C CNN
F 2 "" H 7875 2000 60  0000 C CNN
F 3 "" H 7875 2000 60  0000 C CNN
	1    7875 2000
	0    1    1    0   
$EndComp
$Comp
L GND #PWR020
U 1 1 57F16CCA
P 8175 1750
F 0 "#PWR020" H 8175 1750 30  0001 C CNN
F 1 "GND" H 8175 1680 30  0001 C CNN
F 2 "" H 8175 1750 60  0000 C CNN
F 3 "" H 8175 1750 60  0000 C CNN
	1    8175 1750
	1    0    0    -1  
$EndComp
Wire Wire Line
	8375 1350 8175 1350
Wire Wire Line
	8875 2000 9125 2000
Wire Wire Line
	9125 2000 9125 1450
Wire Wire Line
	9125 1450 8975 1450
$Comp
L GND #PWR021
U 1 1 57F17307
P 9425 1650
F 0 "#PWR021" H 9425 1650 30  0001 C CNN
F 1 "GND" H 9425 1580 30  0001 C CNN
F 2 "" H 9425 1650 60  0000 C CNN
F 3 "" H 9425 1650 60  0000 C CNN
	1    9425 1650
	1    0    0    -1  
$EndComp
$Comp
L R R59
U 1 1 57F18765
P 8125 3200
F 0 "R59" V 8205 3200 40  0000 C CNN
F 1 "10K" V 8132 3201 40  0000 C CNN
F 2 "" V 8055 3200 30  0001 C CNN
F 3 "" H 8125 3200 30  0000 C CNN
	1    8125 3200
	0    1    1    0   
$EndComp
$Comp
L R R61
U 1 1 57F1888E
P 8625 3200
F 0 "R61" V 8705 3200 40  0000 C CNN
F 1 "10K" V 8632 3201 40  0000 C CNN
F 2 "" V 8555 3200 30  0001 C CNN
F 3 "" H 8625 3200 30  0000 C CNN
	1    8625 3200
	0    1    1    0   
$EndComp
$Comp
L GND #PWR022
U 1 1 57F189B4
P 8175 3000
F 0 "#PWR022" H 8175 3000 30  0001 C CNN
F 1 "GND" H 8175 2930 30  0001 C CNN
F 2 "" H 8175 3000 60  0000 C CNN
F 3 "" H 8175 3000 60  0000 C CNN
	1    8175 3000
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR023
U 1 1 57F18AC4
P 7875 3200
F 0 "#PWR023" H 7875 3200 30  0001 C CNN
F 1 "GND" H 7875 3130 30  0001 C CNN
F 2 "" H 7875 3200 60  0000 C CNN
F 3 "" H 7875 3200 60  0000 C CNN
	1    7875 3200
	0    1    1    0   
$EndComp
Wire Wire Line
	8375 2600 8175 2600
Wire Wire Line
	8375 2800 8375 3200
Connection ~ 8375 3200
Wire Wire Line
	8875 3200 9125 3200
Wire Wire Line
	9125 3200 9125 2700
Wire Wire Line
	9125 2700 8975 2700
Connection ~ 9125 1450
Connection ~ 9125 2700
$Comp
L GND #PWR024
U 1 1 57F18F1B
P 9425 2900
F 0 "#PWR024" H 9425 2900 30  0001 C CNN
F 1 "GND" H 9425 2830 30  0001 C CNN
F 2 "" H 9425 2900 60  0000 C CNN
F 3 "" H 9425 2900 60  0000 C CNN
	1    9425 2900
	1    0    0    -1  
$EndComp
$Comp
L CONN_3 K2
U 1 1 57F1957F
P 10475 2600
F 0 "K2" V 10425 2600 50  0000 C CNN
F 1 "CONN_3" V 10525 2600 40  0000 C CNN
F 2 "" H 10475 2600 60  0001 C CNN
F 3 "" H 10475 2600 60  0000 C CNN
	1    10475 2600
	1    0    0    -1  
$EndComp
$Comp
L DIODE D5
U 1 1 57F19FBD
P 9775 2600
F 0 "D5" H 9650 2625 40  0000 C CNN
F 1 "DIODE" H 9775 2500 40  0000 C CNN
F 2 "" H 9775 2600 60  0001 C CNN
F 3 "" H 9775 2600 60  0000 C CNN
	1    9775 2600
	1    0    0    -1  
$EndComp
Text GLabel 9975 2800 3    40   Input ~ 0
12V
Text Notes 10625 2525 0    50   ~ 0
GND
Text Notes 10625 2625 0    50   ~ 0
12V
Text Notes 10625 2725 0    50   ~ 0
SENSE
Text GLabel 10050 3200 0    40   Output ~ 0
sense2
Wire Wire Line
	9975 2600 10125 2600
Connection ~ 9975 2600
Wire Wire Line
	10125 2500 9425 2500
Wire Wire Line
	9575 2600 9575 2500
Connection ~ 9575 2500
Wire Wire Line
	9975 2800 9975 2600
Text GLabel 10225 5050 2    40   Input ~ 0
sense1
Text GLabel 10225 4975 2    40   Input ~ 0
sense2
Text GLabel 10700 3100 1    40   Input ~ 0
3V3_Reg
$Comp
L R R63
U 1 1 57F1F00F
P 10450 3200
F 0 "R63" V 10530 3200 40  0000 C CNN
F 1 "5K" V 10457 3201 40  0000 C CNN
F 2 "" V 10380 3200 30  0001 C CNN
F 3 "" H 10450 3200 30  0000 C CNN
	1    10450 3200
	0    -1   -1   0   
$EndComp
Wire Wire Line
	10700 3100 10700 3200
Wire Wire Line
	10125 2700 10125 3200
Wire Wire Line
	10050 3200 10200 3200
Connection ~ 10125 3200
$Comp
L CONN_3 K1
U 1 1 57F2020B
P 10475 1350
F 0 "K1" V 10425 1350 50  0000 C CNN
F 1 "CONN_3" V 10525 1350 40  0000 C CNN
F 2 "" H 10475 1350 60  0001 C CNN
F 3 "" H 10475 1350 60  0000 C CNN
	1    10475 1350
	1    0    0    -1  
$EndComp
$Comp
L DIODE D4
U 1 1 57F20211
P 9775 1350
F 0 "D4" H 9650 1375 40  0000 C CNN
F 1 "DIODE" H 9775 1250 40  0000 C CNN
F 2 "" H 9775 1350 60  0001 C CNN
F 3 "" H 9775 1350 60  0000 C CNN
	1    9775 1350
	1    0    0    -1  
$EndComp
Text GLabel 9975 1550 3    40   Input ~ 0
12V
Text Notes 10625 1275 0    50   ~ 0
GND
Text Notes 10625 1375 0    50   ~ 0
12V
Text Notes 10625 1475 0    50   ~ 0
SENSE
Text GLabel 10050 1950 0    40   Output ~ 0
sense1
Wire Wire Line
	9975 1350 10125 1350
Connection ~ 9975 1350
Wire Wire Line
	10125 1250 9425 1250
Wire Wire Line
	9575 1350 9575 1250
Connection ~ 9575 1250
Wire Wire Line
	9975 1550 9975 1350
Text GLabel 10700 1850 1    40   Input ~ 0
3V3_Reg
$Comp
L R R62
U 1 1 57F20223
P 10450 1950
F 0 "R62" V 10530 1950 40  0000 C CNN
F 1 "5K" V 10457 1951 40  0000 C CNN
F 2 "" V 10380 1950 30  0001 C CNN
F 3 "" H 10450 1950 30  0000 C CNN
	1    10450 1950
	0    -1   -1   0   
$EndComp
Wire Wire Line
	10700 1850 10700 1950
Wire Wire Line
	10125 1450 10125 1950
Wire Wire Line
	10050 1950 10200 1950
Connection ~ 10125 1950
Wire Wire Line
	2775 5750 2950 5750
Wire Wire Line
	1600 7150 1750 7150
Text Notes 8000 3525 0    50   ~ 0
amplifier 2x\nbase signal = 2x fan-signal
Text Notes 4300 2800 0    60   ~ 0
0-2V VSET \n(for 0-20V Vout)
$EndSCHEMATC
